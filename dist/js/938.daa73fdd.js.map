{"version":3,"file":"js/938.daa73fdd.js","mappings":"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","sources":["webpack://vue-crm/./src/views/CategoriesView.vue","webpack://vue-crm/./src/components/app/CategoryCreate.vue","webpack://vue-crm/./src/components/app/CategoryCreate.vue?1c1f","webpack://vue-crm/./src/components/app/CategoryEdit.vue","webpack://vue-crm/./src/components/app/CategoryEdit.vue?b5cb","webpack://vue-crm/./src/views/CategoriesView.vue?99e1"],"sourcesContent":["<template>\n  <div>\n    <div class=\"page-title\">\n      <h3>{{ $localize('Categories') }}</h3>\n    </div>\n    <section>\n      <Loader v-if=\"loading\" />\n      <div class=\"row\" v-else>\n        <CategoryCreate @created=\"addNewCategory\" />\n        <CategoryEdit\n          v-if=\"categories.length\"\n          :options=\"categories\"\n          :key=\"categories.length + updateCount\"\n          @updated=\"updateCategories\"\n        />\n        <p v-else class=\"center\">{{ $localize('Cat_Message') }}</p>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport CategoryCreate from '@/components/app/CategoryCreate.vue'\nimport CategoryEdit from '@/components/app/CategoryEdit.vue'\nimport { useHead } from '@vueuse/head'\nimport { computed } from 'vue'\nimport localize from '@/utils/localize'\n\nexport default {\n  setup() {\n    useHead({\n      title: computed(() => localize('ProfileTitle'))\n    })\n  },\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'categories',\n  data: () => ({\n    categories: [],\n    loading: true,\n    updateCount: 0,\n  }),\n  components: {\n    CategoryCreate,\n    CategoryEdit,\n  },\n  async mounted() {\n    this.categories = await this.$store.dispatch('fetchCategories')\n    this.loading = false\n  },\n  methods: {\n    addNewCategory(category) {\n      this.categories.push(category)\n    },\n    updateCategories({ id, name, limit }) {\n      const idx = this.categories.findIndex((c) => c.id === id)\n      this.categories[idx].name = name\n      this.categories[idx].limit = limit\n      this.updateCount++ //для принудительного обновления данных в селекте через :key\n    },\n  },\n}\n</script>\n","<template>\n  <div class=\"col s12 m6\">\n    <div>\n      <div class=\"page-subtitle\">\n        <h4>{{$localize('Create')}}</h4>\n      </div>\n\n      <form @submit.prevent=\"onSubmit\">\n        <div class=\"input-field\">\n          <input\n            id=\"name\"\n            type=\"text\"\n            v-model=\"name\"\n            :class=\"{ invalid: v$.name.$error }\"\n          />\n          <label for=\"name\">{{$localize('Cat_Title')}}</label>\n          <span\n            class=\"helper-text invalid\"\n            v-for=\"error of v$.name.$errors\"\n            :key=\"error.$uid\"\n            >{{$localize('Cat_EnterTitle')}}</span\n          >\n        </div>\n\n        <div class=\"input-field\">\n          <input\n            id=\"limit\"\n            type=\"number\"\n            v-model.number=\"limit\"\n            :class=\"{ invalid: v$.limit.$error }\"\n          />\n          <label for=\"limit\">{{$localize('Cat_Limit')}}</label>\n          <span\n            class=\"helper-text invalid\"\n            v-for=\"error of v$.limit.$errors\"\n            :key=\"error.$uid\"\n            >{{ `${$localize('Cat_Limit')}: ${error.$message}` }}</span\n          >\n        </div>\n\n        <button class=\"btn waves-effect waves-light\" type=\"submit\">\n          {{$localize('Create')}}\n          <i class=\"material-icons right\">send</i>\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport useVuelidate from \"@vuelidate/core\";\nimport { required, minValue } from \"@vuelidate/validators\";\nimport { updateTextFields } from \"materialize-css\";\n\nexport default {\n  setup() {\n    return { v$: useVuelidate() };\n  },\n  data: () => ({\n    name: \"\",\n    limit: 1,\n  }),\n  validations: {\n    name: { required, $autoDirty: true },\n    limit: { required, minValue: minValue(1), $autoDirty: true },\n  },\n  mounted() {\n    updateTextFields();\n  },\n  methods: {\n    async onSubmit() {\n      const isFormCorrect = await this.v$.$validate();\n      if (!isFormCorrect) return;\n      const formData = {\n        name: this.name,\n        limit: this.limit,\n      };\n      try {\n        const category = await this.$store.dispatch(\"createCategory\", formData);\n        this.name = '';\n        this.limit = 1;\n        this.v$.$reset();\n        this.$message(`Категория ${category.name} успешно создана`)\n        this.$emit('created', category)\n        // eslint-disable-next-line no-empty\n      } catch (e) {}\n    },\n  },\n};\n</script>\n","import { render } from \"./CategoryCreate.vue?vue&type=template&id=07f0e2c4\"\nimport script from \"./CategoryCreate.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryCreate.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\nprokof\\\\Documents\\\\learnVueJS\\\\vue-crm\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div class=\"col s12 m6\">\n    <div>\n      <div class=\"page-subtitle\">\n        <h4>{{ $localize('Cat_Edit') }}</h4>\n      </div>\n\n      <form @submit.prevent=\"onSubmit\">\n        <div class=\"input-field\">\n          <select ref=\"select\" v-model=\"current\">\n            <option\n              v-for=\"option of options\"\n              :key=\"option.id\"\n              :value=\"option.id\"\n            >\n              {{ option.name }}\n            </option>\n          </select>\n          <label>{{ $localize('Cat_Choose') }}</label>\n        </div>\n\n        <div class=\"input-field\">\n          <input\n            id=\"name\"\n            type=\"text\"\n            v-model=\"name\"\n            :class=\"{ invalid: v$.name.$error }\"\n          />\n          <label for=\"name\">{{ $localize('Cat_Title') }}</label>\n          <span\n            class=\"helper-text invalid\"\n            v-for=\"error of v$.name.$errors\"\n            :key=\"error.$uid\"\n            >{{ $localize('Cat_EnterTitle') }}</span\n          >\n        </div>\n\n        <div class=\"input-field\">\n          <input\n            id=\"limit\"\n            type=\"number\"\n            v-model.number=\"limit\"\n            :class=\"{ invalid: v$.limit.$error }\"\n          />\n          <label for=\"limit\">{{ $localize('Cat_Limit') }}</label>\n          <span\n            class=\"helper-text invalid\"\n            v-for=\"error of v$.limit.$errors\"\n            :key=\"error.$uid\"\n            >{{ `Лимит: ${error.$message}` }}</span\n          >\n        </div>\n\n        <button class=\"btn waves-effect waves-light\" type=\"submit\">\n          {{ $localize('Submit') }}\n          <i class=\"material-icons right\">send</i>\n        </button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { FormSelect, updateTextFields } from 'materialize-css'\nimport useVuelidate from '@vuelidate/core'\nimport { required, minValue } from '@vuelidate/validators'\n\nexport default {\n  setup() {\n    return { v$: useVuelidate() }\n  },\n  props: {\n    options: {\n      type: Array,\n      required: true,\n    },\n  },\n  data: () => ({\n    select: null,\n    name: '',\n    limit: 1,\n    current: null,\n  }),\n  validations: {\n    name: { required, $autoDirty: true },\n    limit: { required, minValue: minValue(1), $autoDirty: true },\n  },\n  watch: {\n    //меняет данные в инпутах в зависимости от выбранного селекта\n    current(id) {\n      const { name, limit } = this.options.find((c) => c.id === id)\n      this.name = name\n      this.limit = limit\n      this.current = id\n    },\n  },\n  created() {\n    //сразу показывет первую категорию в списке и ее данные\n    const { id, name, limit } = this.options[0]\n    this.name = name\n    this.limit = limit\n    this.current = id\n  },\n  mounted() {\n    updateTextFields()\n    this.select = FormSelect.init(this.$refs.select) //селект из материалайза\n  },\n  unmounted() {\n    if (this.select && this.select.unmounted) {\n      this.select.unmounted()\n    }\n  },\n  methods: {\n    async onSubmit() {\n      const isFormCorrect = await this.v$.$validate()\n      if (!isFormCorrect) return\n      const formData = {\n        id: this.current,\n        name: this.name,\n        limit: this.limit,\n      }\n      try {\n        await this.$store.dispatch('updateCategory', formData)\n        this.$message(`Категория успешно изменена`)\n        this.$emit('updated', formData)\n        // eslint-disable-next-line no-empty\n      } catch (e) {}\n    },\n  },\n}\n</script>\n","import { render } from \"./CategoryEdit.vue?vue&type=template&id=d559568c\"\nimport script from \"./CategoryEdit.vue?vue&type=script&lang=js\"\nexport * from \"./CategoryEdit.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\nprokof\\\\Documents\\\\learnVueJS\\\\vue-crm\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./CategoriesView.vue?vue&type=template&id=6f440450\"\nimport script from \"./CategoriesView.vue?vue&type=script&lang=js\"\nexport * from \"./CategoriesView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\nprokof\\\\Documents\\\\learnVueJS\\\\vue-crm\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_toDisplayString","_ctx","_createBlock","_component_Loader","key","_createVNode","_component_CategoryCreate","onCreated","$options","length","_component_CategoryEdit","options","onUpdated","for","type","onSubmit","id","$event","invalid","$setup","name","$error","_Fragment","_renderList","$errors","error","$uid","limit","$message","_hoisted_8","setup","v$","useVuelidate","data","validations","required","$autoDirty","minValue","mounted","updateTextFields","methods","async","isFormCorrect","this","$validate","formData","category","$store","dispatch","$reset","$emit","e","__exports__","ref","$props","option","value","_hoisted_4","_hoisted_10","props","Array","select","current","watch","find","c","created","FormSelect","$refs","unmounted","useHead","title","computed","localize","categories","loading","updateCount","components","CategoryCreate","CategoryEdit","addNewCategory","push","updateCategories","idx","findIndex","render"],"sourceRoot":""}
(function(){"use strict";var e={818:function(e,t,r){var o=r(9242),n=r(3396);const a={id:"app"};function i(e,t,r,o,i,s){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",a,[((0,n.wg)(),(0,n.j4)((0,n.LL)(s.layout),null,{default:(0,n.w5)((()=>[(0,n.Wm)(c)])),_:1}))])}const s={class:"grey darken-1 empty-layout"};function c(e,t,r,o,a,i){const c=(0,n.up)("router-view");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n.Wm)(c)])}var l=r(6270),u={computed:{error(){return this.$store.getters.error}},watch:{error(e){this.$error(l.Z[e.code]||"Что-то пошло не так")}}},d=r(89);const m=(0,d.Z)(u,[["render",c]]);var p=m,f=r(7139);const h={key:1,class:"app-main-layout"},g={class:"app-page"},y={class:"fixed-action-btn"},v=(0,n._)("i",{class:"large material-icons"},"add",-1);function w(e,t,r,o,a,i){const s=(0,n.up)("Loader"),c=(0,n.up)("Navbar"),l=(0,n.up)("Sidebar"),u=(0,n.up)("router-view"),d=(0,n.up)("router-link"),m=(0,n.Q2)("tooltip");return e.loading?((0,n.wg)(),(0,n.j4)(s,{key:0})):((0,n.wg)(),(0,n.iD)("div",h,[(0,n.Wm)(c,{onMyClick:t[0]||(t[0]=t=>e.isOpen=!e.isOpen)}),(0,n.Wm)(l,{myProps:e.isOpen},null,8,["myProps"]),(0,n._)("main",{class:(0,f.C_)(["app-content",{full:!e.isOpen}])},[(0,n._)("div",g,[(0,n.Wm)(u)])],2),(0,n._)("div",y,[(0,n.wy)(((0,n.wg)(),(0,n.j4)(d,{class:"btn-floating btn-large blue",to:"/record"},{default:(0,n.w5)((()=>[v])),_:1})),[[m,e.$localize("Record_Message_Add")]])])]))}const b={class:"navbar orange lighten-1"},_={class:"nav-wrapper"},C={class:"navbar-left"},E=(0,n._)("i",{class:"material-icons black-text"},"dehaze",-1),k=[E],A={class:"black-text"},P={class:"right hide-on-small-and-down"},R={class:"dropdown-trigger black-text",href:"#","data-target":"dropdown",ref:"dropdown"},O=(0,n._)("i",{class:"material-icons right"},"arrow_drop_down",-1),x={id:"dropdown",class:"dropdown-content"},$=(0,n._)("i",{class:"material-icons"},"account_circle",-1),N=(0,n.Uk)("Профиль "),Z=(0,n._)("li",{class:"divider",tabindex:"-1"},null,-1),D=(0,n._)("i",{class:"material-icons"},"assignment_return",-1),H=(0,n.Uk)("Выйти "),T=[D,H];function U(e,t,r,a,i,s){const c=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("nav",b,[(0,n._)("div",_,[(0,n._)("div",C,[(0,n._)("a",{href:"#",onClick:t[0]||(t[0]=(0,o.iM)((t=>e.$emit("myClick")),["prevent"]))},k),(0,n._)("span",A,(0,f.zw)(e.$formatDate(e.date,"datetime")),1)]),(0,n._)("ul",P,[(0,n._)("li",null,[(0,n._)("a",R,[(0,n.Uk)((0,f.zw)(s.name)+" ",1),O],512),(0,n._)("ul",x,[(0,n._)("li",null,[(0,n.Wm)(c,{to:"/profile",class:"black-text"},{default:(0,n.w5)((()=>[$,N])),_:1})]),Z,(0,n._)("li",null,[(0,n._)("a",{href:"#",class:"black-text",onClick:t[1]||(t[1]=(0,o.iM)(((...e)=>s.logout&&s.logout(...e)),["prevent"]))},T)])])])])])])}var S=r(5797),j={data:()=>({date:new Date,interval:null,dropdown:null}),methods:{async logout(){await this.$store.dispatch("logout"),this.$router.push("/login?message=logout")}},computed:{name(){return this.$store.getters.info.name}},mounted(){this.interval=setInterval((()=>{this.date=new Date}),1e3),this.dropdown=S.Dropdown.init(this.$refs.dropdown,{constrainWidth:!0})},beforeUnmount(){clearInterval(this.interval),this.dropdown&&this.dropdown.destroy&&this.dropdown.destroy()}};const I=(0,d.Z)(j,[["render",U]]);var L=I;function M(e,t,r,o,a,i){const s=(0,n.up)("router-link");return(0,n.wg)(),(0,n.iD)("ul",{class:(0,f.C_)(["sidenav app-sidenav",{open:r.myProps}])},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.links,(t=>((0,n.wg)(),(0,n.iD)("li",{key:t.url},[(0,n.Wm)(s,{to:t.url,exact:t.exact,"active-class":"active orange",class:"pointer"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,f.zw)(e.$localize(t.title)),1)])),_:2},1032,["to","exact"])])))),128))],2)}var B={props:["myProps"],data:()=>({links:[{title:"Bill",url:"/",exact:!0},{title:"History",url:"/history"},{title:"Planning",url:"/planning"},{title:"NewRecord",url:"/record"},{title:"Categories",url:"/categories"}]})};const z=(0,d.Z)(B,[["render",M]]);var F=z,W={name:"main-layout",components:{Navbar:L,Sidebar:F},data:()=>({isOpen:!0,loading:!0}),async mounted(){Object.keys(this.$store.getters.info).length||await this.$store.dispatch("fetchInfo"),this.loading=!1},computed:{error(){return this.$store.getters.error}},watch:{error(e){this.$error(l.Z[e.code]||"Что-то пошло не так")}}};const q=(0,d.Z)(W,[["render",w]]);var K=q,J={computed:{layout(){return(this.$route.meta.layout||"empty")+"-layout"}},components:{EmptyLayout:p,MainLayout:K}};const Q=(0,d.Z)(J,[["render",i]]);var G=Q,V=r(9134),Y=r.n(V),X=r(2350),ee=r(5431);(0,ee.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var te=r(678),re=r(1005);const oe=[{path:"/",name:"home",meta:{layout:"main",auth:!0},component:()=>r.e(649).then(r.bind(r,5649))},{path:"/login",name:"login",meta:{layout:"empty"},component:()=>Promise.all([r.e(885),r.e(915)]).then(r.bind(r,5915))},{path:"/categories",name:"categories",meta:{layout:"main",auth:!0},component:()=>Promise.all([r.e(885),r.e(938)]).then(r.bind(r,2938))},{path:"/detail-record/:id",name:"detail-record",meta:{layout:"main",auth:!0},component:()=>r.e(147).then(r.bind(r,8147))},{path:"/history",name:"history",meta:{layout:"main",auth:!0},component:()=>r.e(417).then(r.bind(r,8417))},{path:"/planning",name:"planning",meta:{layout:"main",auth:!0},component:()=>r.e(943).then(r.bind(r,5943))},{path:"/profile",name:"profile",meta:{layout:"main",auth:!0},component:()=>Promise.all([r.e(885),r.e(294)]).then(r.bind(r,294))},{path:"/record",name:"record",meta:{layout:"main",auth:!0},component:()=>Promise.all([r.e(885),r.e(334)]).then(r.bind(r,3334))},{path:"/register",name:"register",meta:{layout:"empty"},component:()=>Promise.all([r.e(885),r.e(780)]).then(r.bind(r,9780))}],ne=(0,te.p7)({history:(0,te.PO)("/"),routes:oe});ne.beforeEach(((e,t,r)=>{const o=re.Z.auth().currentUser,n=e.matched.some((e=>e.meta.auth));n&&!o?r("/login?message=login"):r()}));var ae=ne,ie=r(1644),se=r(9672),ce=r(790);const le={"ru-RU":se,"en-US":ce};var ue={install(e){e.config.globalProperties.$formatDate=function(e,t="date"){const r={};t.includes("date")&&(r.day="2-digit",r.month="long",r.year="numeric"),t.includes("time")&&(r.hour="2-digit",r.minute="2-digit",r.second="2-digit"),t.includes("nosecond")&&(r.hour="2-digit",r.minute="2-digit");const o=ie.Z.getters.info.locale;return new Intl.DateTimeFormat(o,r).format(new Date(e))},e.config.globalProperties.$localize=function(e){const t=ie.Z.getters.info.locale||"en-US";return le[t][e]||"[Localize error]: key not found"},e.config.globalProperties.$message=function(e){(0,S.toast)({html:e})},e.config.globalProperties.$error=function(e){(0,S.toast)({html:`[Ошибка]: ${e}`})}}};const de={class:"app-loader"},me={class:"preloader-wrapper active"},pe=(0,n.uE)('<div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div>',3),fe=[pe];function he(e,t,r,o,a,i){return(0,n.wg)(),(0,n.iD)("div",de,[(0,n._)("div",me,[(0,n._)("div",{class:(0,f.C_)(["spinner-layer",i.color])},fe,2)])])}var ge={computed:{color(){const e=["spinner-blue-only","spinner-red-only","spinner-green-only"];return e[Math.floor(3*Math.random())]}}};const ye=(0,d.Z)(ge,[["render",he]]);var ve=ye,we={beforeMount(e,{value:t}){S.Tooltip.init(e,{html:t})},unmounted(e){const t=S.Tooltip.getInstance(e);t&&t.destroy&&t.destroy()}},be=r(4275);r(4939),r(5866);let _e;be.Z.initializeApp({apiKey:"AIzaSyDkjqgpQ44ZOvv-rKthp3qEDjJb3QVNLlc",authDomain:"vue-crm-b711f.firebaseapp.com",projectId:"vue-crm-b711f",storageBucket:"vue-crm-b711f.appspot.com",messagingSenderId:"1034649975577",appId:"1:1034649975577:web:1aa8769f9f22a398ab6388"}),be.Z.auth().onAuthStateChanged((async()=>{_e||(_e=o.ri(G).use(ie.Z).use(ae).use((0,X.G6)()).use(S).use(ue).directive("tooltip",we).component("Loader",ve).component("Pagination",Y()),await ae.isReady(),_e.mount("#app"))}))},1644:function(e,t,r){r.d(t,{Z:function(){return l}});var o=r(65),n=r(1005),a={actions:{async login({commit:e},{email:t,password:r}){try{await n.Z.auth().signInWithEmailAndPassword(t,r)}catch(o){throw e("setError",o),o}},async logout({commit:e}){await n.Z.auth().signOut(),e("clearInfo")},async register({dispatch:e,commit:t},{email:r,password:o,name:a}){try{await n.Z.auth().createUserWithEmailAndPassword(r,o);const t=await e("getUid");await n.Z.database().ref(`/users/${t}/info`).set({bill:1e4,name:a}),this.$router.push("/")}catch(i){throw t("setError",i),i}},getUid(){const e=n.Z.auth().currentUser;return e?e.uid:null}}},i={state:{info:{}},mutations:{setInfo(e,t){e.info=t},clearInfo(e){e.info={}}},actions:{async fetchInfo({dispatch:e,commit:t}){try{const r=await e("getUid"),o=(await n.Z.database().ref(`/users/${r}/info`).once("value")).val();t("setInfo",o)}catch(r){throw t("setError",r),r}},async updateInfo({dispatch:e,commit:t,getters:r},o){try{const a=await e("getUid"),i={...r.info,...o};await n.Z.database().ref(`/users/${a}/info`).update(i),t("setInfo",i)}catch(a){throw t("setError",a),a}}},getters:{info:e=>e.info}},s={actions:{async createCategory({commit:e,dispatch:t},{name:r,limit:o}){try{const e=await t("getUid"),a=await n.Z.database().ref(`/users/${e}/categories`).push({name:r,limit:o});return{name:r,limit:o,id:a.key}}catch(a){throw e("setError",a),a}},async updateCategory({commit:e,dispatch:t},{name:r,limit:o,id:a}){try{const e=await t("getUid");await n.Z.database().ref(`/users/${e}/categories`).child(a).update({name:r,limit:o})}catch(i){throw e("setError",i),i}},async fetchCategories({commit:e,dispatch:t}){try{const e=await t("getUid"),r=(await n.Z.database().ref(`/users/${e}/categories`).once("value")).val()||{};return Object.keys(r).map((e=>({...r[e],id:e})))}catch(r){throw e("setError",r),r}},async fetchCategoryById({commit:e,dispatch:t},r){try{const e=await t("getUid"),o=(await n.Z.database().ref(`/users/${e}/categories`).child(r).once("value")).val()||{};return{...o,id:r}}catch(o){throw e("setError",o),o}}}},c={actions:{async createRecord({dispatch:e,commit:t},r){try{const t=await e("getUid");return await n.Z.database().ref(`/users/${t}/records`).push(r)}catch(o){throw t("setError",o),o}},async fetchRecords({commit:e,dispatch:t}){try{const e=await t("getUid"),r=(await n.Z.database().ref(`/users/${e}/records`).once("value")).val()||{};return Object.keys(r).map((e=>({...r[e],id:e})))}catch(r){throw e("setError",r),r}},async fetchRecordById({commit:e,dispatch:t},r){try{const e=await t("getUid"),o=(await n.Z.database().ref(`/users/${e}/records`).child(r).once("value")).val()||{};return{...o,id:r}}catch(o){throw e("setError",o),o}}}},l=(0,o.MT)({state:{error:null},getters:{error:e=>e.error},mutations:{setError(e,t){e.error=t},clearError(e){e.error=null}},actions:{async fetchCurrency(){const e="cab2c2c01a28b199b59c1f9b630f0614",t=await fetch(`http://data.fixer.io/api/latest?access_key=${e}&symbols=USD,EUR,RUB`);return await t.json()}},modules:{auth:a,info:i,category:s,record:c}})},6270:function(e,t){t["Z"]={logout:"Вы вышли из системы",login:"Необходимо войти или зарегистрироваться","auth/user-not-found":"Такой пользователь не найден","auth/wrong-password":"Неверный пароль","auth/email-already-in-use":"Пользователь с таким email уже зарегистрирован"}},790:function(e){e.exports=JSON.parse('{"ProfileTitle":"Profile","Login":"Log In","Name":"Name","AppTitle":"Home Bookkeeping","EnterName":"Enter your name","EnterAmount":"Enter Amount","Password":"Password","Submit":"Resubmit","Bill":"Account","Cost":"Cost","Income":"Income","History":"History","Description":"Description","Planning":"Planning","NewRecord":"Create New Record","HistoryRecord":"History of Records","Categories":"Categories","Create":"Create","Cat_Title":"Title","Cat_EnterTitle":"Enter Category Title","Cat_Message":"No Categories yet","Record_Message_History":"No Records yet","Cat_Message_Add":"Add New Category","Record_Message_Add":"Add New Record","Cat_Limit":"Limit","Cat_Edit":"Edit","Cat_Choose":"Choose a Category","Amount":"Amount","Date":"Date","Record":"Record","Category":"Category","History_Type":"Type","History_Open":"Open","History_Tooltip":"Record Detiles","Home_Account":"Currency Account","Home_Course":"Rate","Home_Currency":"Currency","Home_ExchangeRates":"Exchange Rates","Record_Message":"Does\'t Exist","Start":"First","End":"Last","Login_NoAccount":"No Account?","Register":"Register","Enter":"Enter","From":"from","Exceeded":"Exceeded by","Left":"Left","Agree":"I Agree","HaveAccount":"Allready Have an Account?"}')},9672:function(e){e.exports=JSON.parse('{"ProfileTitle":"Профиль","AppTitle":"Домашняя бухгалтерия","Name":"Имя","Login":"Логин","EnterName":"Введите имя","EnterAmount":"Введите сумму","Password":"Пароль","Submit":"Обновить","Bill":"Счет","Cost":"Расход","Income":"Доход","History":"История","Description":"Описание","Planning":"Планирование","NewRecord":"Новая запись","HistoryRecord":"История записей","Categories":"Категории","Create":"Создать","Cat_Title":"Название","Cat_EnterTitle":"Введите название категории","Cat_Message":"Категорий пока нет","Record_Message_History":"Записей пока нет","Record_Message_Add":"Добавьте запись","Cat_Message_Add":"Добавьте запись","Cat_Limit":"Лимит","Cat_Edit":"Редактировать","Cat_Choose":"Выберите категорию","Amount":"Сумма","Date":"Дата","Record":"Запись","Category":"Категория","History_Type":"Тип","History_Open":"Открыть","History_Tooltip":"Посмотреть детали записи","Home_Account":"Cчет в валюте","Home_Currency":"Валюта","Home_Course":"Курс","Home_ExchangeRates":"Курс валют","Record_Message":"Не существует","Start":"В начало","End":"В конец","Login_NoAccount":"Нет аккаунта?","Register":"Зарегистрироваться","Enter":"Войти","From":"Из","Exceeded":"Превышение на","Left":"Осталось","Agree":"С правилами согласен","HaveAccount":"Уже есть аккаунт?"}')}},t={};function r(o){var n=t[o];if(void 0!==n)return n.exports;var a=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}r.m=e,function(){var e=[];r.O=function(t,o,n,a){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],n=e[u][1],a=e[u][2];for(var s=!0,c=0;c<o.length;c++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](o[c])}))?o.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[o,n,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,o){return r.f[o](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{147:"b045e2ce",294:"ecc676a7",334:"c4dc8028",417:"0f475b74",649:"3ef5f31c",780:"9800c9d1",885:"ccb471ca",915:"d06d8fed",938:"daa73fdd",943:"ec8fb63b"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+".41afdd63.css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vue-crm:";r.l=function(o,n,a,i){if(e[o])e[o].push(n);else{var s,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+a){s=d;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+a),s.src=o),e[o]=[n];var m=function(t,r){s.onerror=s.onload=null,clearTimeout(p);var n=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=m.bind(null,s.onerror),s.onload=m.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){r.p="/"}(),function(){var e=function(e,t,r,o){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css";var a=function(a){if(n.onerror=n.onload=null,"load"===a.type)r();else{var i=a&&("load"===a.type?"missing":a.type),s=a&&a.target&&a.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,n.parentNode.removeChild(n),o(c)}};return n.onerror=n.onload=a,n.href=t,document.head.appendChild(n),n},t=function(e,t){for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var n=r[o],a=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(a===e||a===t))return n}var i=document.getElementsByTagName("style");for(o=0;o<i.length;o++){n=i[o],a=n.getAttribute("data-href");if(a===e||a===t)return n}},o=function(o){return new Promise((function(n,a){var i=r.miniCssF(o),s=r.p+i;if(t(i,s))return n();e(o,s,n,a)}))},n={143:0};r.f.miniCss=function(e,t){var r={294:1};n[e]?t.push(n[e]):0!==n[e]&&r[e]&&t.push(n[e]=o(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}(),function(){var e={143:0};r.f.j=function(t,o){var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var a=new Promise((function(r,o){n=e[t]=[r,o]}));o.push(n[2]=a);var i=r.p+r.u(t),s=new Error,c=function(o){if(r.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var a=o&&("load"===o.type?"missing":o.type),i=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",s.name="ChunkLoadError",s.type=a,s.request=i,n[1](s)}};r.l(i,c,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,a,i=o[0],s=o[1],c=o[2],l=0;if(i.some((function(t){return 0!==e[t]}))){for(n in s)r.o(s,n)&&(r.m[n]=s[n]);if(c)var u=c(r)}for(t&&t(o);l<i.length;l++)a=i[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},o=self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[998],(function(){return r(818)}));o=r.O(o)})();
//# sourceMappingURL=app.30e09d04.js.map
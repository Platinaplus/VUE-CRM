"use strict";(self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[]).push([[943],{6316:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(1644),i=r(9672),o=r(790);const s={"ru-RU":i,"en-US":o};function l(e){const t=n.Z.getters.info.locale||"en-US";return s[t][e]||"[Localize error]: key not found"}},5943:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(3396),i=r(7139);const o={class:"page-title"},s={key:1,class:"center"},l={key:2},c={class:"progress"};function a(e,t,r,a,u,g){const d=(0,n.up)("Loader"),p=(0,n.Q2)("tooltip");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",o,[(0,n._)("h3",null,(0,i.zw)(e.$localize("Planning")),1),(0,n._)("h4",null,(0,i.zw)(g.getCurrency(e.info.bill)),1)]),e.loading?((0,n.wg)(),(0,n.j4)(d,{key:0})):e.categories.length?((0,n.wg)(),(0,n.iD)("section",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.categories,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.id},[(0,n._)("p",null,[(0,n._)("strong",null,(0,i.zw)(t.name),1),(0,n.Uk)(" "+(0,i.zw)(g.getCurrency(t.spend))+" "+(0,i.zw)(e.$localize("From"))+" "+(0,i.zw)(g.getCurrency(t.limit)),1)]),(0,n.wy)(((0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("div",{class:(0,i.C_)(["determinate",[t.progressColor]]),style:(0,i.j5)({width:t.progressPercent+"%"})},null,6)])),[[p,t.tooltip]])])))),128))])):((0,n.wg)(),(0,n.iD)("p",s,(0,i.zw)(e.$localize("Cat_Message")),1))])}var u=r(65),g=r(2350),d=r(6316),p={setup(){(0,g.Kf)({title:(0,n.Fl)((()=>(0,d.Z)("ProfileTitle")))})},name:"planning",data:()=>({loading:!0,categories:[]}),async mounted(){const e=await this.$store.dispatch("fetchRecords"),t=await this.$store.dispatch("fetchCategories");this.categories=t.map((t=>{const r=e.filter((e=>e.categoryId===t.id)).filter((e=>"cost"===e.type)).reduce(((e,t)=>e+ +t.amount),0),n=100*r/t.limit,i=n>100?100:n,o=n<60?"green":n<100?"yellow":"red",s=t.limit-r,l=`${s<0?(0,d.Z)("Exceeded"):(0,d.Z)("Left")} ${this.getCurrency(Math.abs(s))}`;return{...t,spend:r,progressPercent:i,progressColor:o,tooltip:l}})),this.loading=!1},computed:{...(0,u.Se)(["info"])},methods:{getCurrency(e){return new Intl.NumberFormat("ru-Ru",{style:"currency",currency:"RUB"}).format(e)}}},w=r(89);const f=(0,w.Z)(p,[["render",a]]);var y=f}}]);
//# sourceMappingURL=943.ec8fb63b.js.map
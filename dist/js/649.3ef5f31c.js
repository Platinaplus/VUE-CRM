"use strict";(self["webpackChunkvue_crm"]=self["webpackChunkvue_crm"]||[]).push([[649],{6316:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(1644),l=r(9672),c=r(790);const s={"ru-RU":l,"en-US":c};function a(e){const t=n.Z.getters.info.locale||"en-US";return s[t][e]||"[Localize error]: key not found"}},5649:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(3396),l=r(7139);const c={class:"page-title"},s=(0,n._)("i",{class:"material-icons"},"refresh",-1),a=[s],i={key:1,class:"row"};function o(e,t,r,s,o,u){const d=(0,n.up)("Loader"),h=(0,n.up)("HomeBill"),w=(0,n.up)("HomeCurrency");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",c,[(0,n._)("h3",null,(0,l.zw)(e.$localize("Bill")),1),(0,n._)("button",{class:"btn waves-effect waves-light btn-small",onClick:t[0]||(t[0]=(...e)=>u.refresh&&u.refresh(...e))},a)]),e.loading?((0,n.wg)(),(0,n.j4)(d,{key:0})):((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(h,{rates:e.currency.rates},null,8,["rates"]),(0,n.Wm)(w,{rates:e.currency.rates,date:e.currency.date},null,8,["rates","date"])]))])}const u={class:"col s12 m6 l4"},d={class:"card light-blue bill-card"},h={class:"card-content white-text"},w={class:"card-title"};function _(e,t,r,c,s,a){return(0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("div",d,[(0,n._)("div",h,[(0,n._)("span",w,(0,l.zw)(e.$localize("Home_Account")),1),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.currencies,(e=>((0,n.wg)(),(0,n.iD)("p",{class:"currency-line",key:e},[(0,n._)("span",null,(0,l.zw)(a.getCurrency(e)),1)])))),128))])])])}var f={props:["rates"],data:()=>({currencies:["RUB","USD","EUR"]}),computed:{base(){return this.$store.getters.info.bill/(this.rates["RUB"]/this.rates["EUR"])}},methods:{getCurrency(e){const t=Math.floor(this.base*this.rates[e]);return new Intl.NumberFormat("ru-Ru",{style:"currency",currency:e}).format(t)}}},m=r(89);const y=(0,m.Z)(f,[["render",_]]);var g=y,v=r(2350),p=r(6316);const z={class:"col s12 m6 l8"},b={class:"card orange darken-3 bill-card"},k={class:"card-content white-text"},C={class:"card-header"},D={class:"card-title"};function H(e,t,r,c,s,a){return(0,n.wg)(),(0,n.iD)("div",z,[(0,n._)("div",b,[(0,n._)("div",k,[(0,n._)("div",C,[(0,n._)("span",D,(0,l.zw)(e.$localize("Home_ExchangeRates")),1)]),(0,n._)("table",null,[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,(0,l.zw)(e.$localize("Home_Currency")),1),(0,n._)("th",null,(0,l.zw)(e.$localize("Home_Course")),1),(0,n._)("th",null,(0,l.zw)(e.$localize("Date")),1)])]),(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(e.currencies,(e=>((0,n.wg)(),(0,n.iD)("tr",{key:e},[(0,n._)("td",null,(0,l.zw)(e),1),(0,n._)("td",null,(0,l.zw)(r.rates[e].toFixed(2)),1),(0,n._)("td",null,(0,l.zw)(r.date),1)])))),128))])])])])])}var U={props:["rates","date"],data:()=>({currencies:["RUB","USD","EUR"]})};const R=(0,m.Z)(U,[["render",H]]);var $=R,B={setup(){(0,v.Kf)({title:(0,n.Fl)((()=>(0,p.Z)("ProfileTitle")))})},name:"HomeView",data:()=>({loading:!0,currency:null}),components:{HomeBill:g,HomeCurrency:$},async mounted(){this.currency=await this.$store.dispatch("fetchCurrency"),this.loading=!1},methods:{async refresh(){this.loading=!0,this.currency=await this.$store.dispatch("fetchCurrency"),this.loading=!1}}};const Z=(0,m.Z)(B,[["render",o]]);var x=Z}}]);
//# sourceMappingURL=649.3ef5f31c.js.map